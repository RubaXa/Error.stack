var coreLogger=function(e){"use strict";var r=/at\s+(?:([^\s]+)(?:.*?)\()?((?:http|file|\/|:|<|[a-z])[^) ]+:\d+)\)?/,t=/^(.*?)(?:\/<)*@(.*?)$/,o=/^()(https?:\/\/.+)/,n=/^(.*?):(\d+)(?::(\d+))?$/;function a(e){if(null==e)return null;var a=e.match(r);if(null===a&&(a=e.match(t)||e.match(o)),a){var s=a[2].match(n),i={raw:e,fn:void 0===a[1]?"<anonymous>":a[1].trim()||"<anonymous>",file:"",line:0,column:0};return s&&(i.file=s[1],i.line=parseInt(s[2],10)||0,i.column=parseInt(s[3],10)||0),i}return null}var s=[],i="MCL:onerror",u=!0,l={},c=null,f=!1,m=!1;function p(e,r,t){if(e instanceof Error||((e=new Error(e)).stackOffset=1),e.uniq){var o=!0===e.uniq?e.stack||e.message||e.name:e.uniq;if(l[o])return;l[o]=1}e.detail=e.detail||r,e.rule=e.rule||t,g(e.message,e.source,e.line,e.col,e)}function d(e,r){for(var t=[],o=2;o<arguments.length;o++)t[o-2]=arguments[o];"function"==typeof e&&(t.unshift(r),r=e,e=!1);try{return r.apply(null,t)}catch(r){return r.uniq=e,console.error(r),void p(r)}}function g(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=!0;if(f&&""===e[1]&&0===e[2]){f=!1,m=!0;var o=JSON.parse;JSON.parse=function(){try{return o.apply(this,arguments)}catch(e){throw e.name="SyntaxError",e.stackOffset=1,e}}}else if(f&&/~|JSON/.test(e[0]))f=!1;else{var n="undefined"!=typeof location?location.toString():void 0;t=u,v(e),s.push(e.concat(n)),c&&!l[i]&&d.apply(this,[i,c].concat(e))}for(var a in l)0===a.indexOf("MCL:")&&delete l[a];return t}function h(e){var r=e.reason,t=r;r instanceof Error||((t=new Error(e.type)).name="UnhandledRejection",t.detail={sender:"promise",reason:r}),e.preventDefault(),p(t)}function v(e){var r=e[4],t=e[1],o=e[2],n=e[3];if(r&&"UnhandledRejection"!==r.name){if(t=r.fileName||t,o=r.lineNumber||o||r.line||0,n=r.columnNumber||n||r.col||0,r.stackOffset||!o||!t){var s=function(e){for(var r=[],t=0,o=e?e.trim().split("\n"):[];t<o.length;t++){var n=a(o[t]);null!==n&&r.push(n)}return r}(r.stack).slice(r.stackOffset||0);s.length&&(o=s[0].line,n=s[0].column,t=s[0].file,r.stack=r.name+": "+r.message+"\n"+s.map((function(e){return e.raw})).join("\n"))}r.source=e[1]=t,r.line=e[2]=o,r.col=e[3]=n}}d.reset=function(){l={}};var y,k=/\/(.*?)\/([a-z]+)?\.test\((.*?)\)|\s+|([()!])/g,b=/^(!|&&|\|\||[()])$/,S={};!function(e){e.Core="core",e.Global="gl",e.Shared="shr",e.API="api",e.Self="self",e.Ext="ext",e.ThirdParty="3rd",e.RB="rb",e.Unknown="unk"}(y||(y={}));var w={},x=null,E=[],j=[];function O(e){if(x=null,"clear"===e)w={};else for(var r in e)if(e.hasOwnProperty(r)){var t=e[r],o="string"==typeof t?{test:t}:t;o.tag=o.tag||y.Unknown,o.category=r,w[r]=o}}function P(e,r){x=null;var t=w[e];for(var o in t||(t={test:!1},w[e]=t),r)t[o]=r[o];t.tag=t.tag||y.Unknown,t.category=e}function R(e){return e&&(E=e,x=null),E}function q(e){return e&&(j=e,x=null),j}function _(e){var r={},t=null;return d("MCL:match",(function(){null===x&&(x=j.concat(E,Object.keys(w)));for(var o=0,n=x.length;o<n;o++){var a=x[o],s=w[a];if(s&&!r[a]&&(r[a]=1,G(s.test,e))){t=s;break}}})),t}function G(e,r){var t=!1;if(!0===e)t=!0;else if("string"==typeof e)t=function(e){var r=[],t=String(e||"").trim();if(S[t])return S[t];var o=t.split(k);if(t)for(var n=0;n<o.length;n++){var a=o[n];a&&r.push({op:a}),o[++n]&&r.push({key:o[n+2],re:new RegExp(o[n].replace(/\\/g,"\\"),o[n+1]||"i")}),o[n+=3]&&r.push({op:o[n]})}var s=function(t){for(var o=!0,n=0,a=0,s=0,i=0,u=r.length;i<u;i++){var l=r[i];if("op"in l){var c=l.op;if("("===c)a++;else if(")"===c)a--;else if("!"===c)s++;else{if(n||!b.test(c)||0===i||u-i==1)throw new SyntaxError('Failed operation "'+c+'" ('+i+"): "+e);if("||"===(n=c)&&o&&!a)break}}else{if(!(l.key in t))throw new Error('Unknown token "'+l.key+'": '+e);var f=t[l.key],m=null!=f&&!1!==f&&l.re.test(f);s%2&&(m=!m),o=("||"===n||o)&&m,n=0,s=0}}return o};return S[t]=s,s}(e)(r);else if(e&&"object"==typeof e)for(var o in t=!0,e){var n=e[o];if(n instanceof RegExp&&!n.test(r[o])){t=!1;break}}return t}var C="undefined"!=typeof location&&location.hostname.replace(/\./g,"\\.")||"none",L={"mail-core":T("/^MCL:/.test(uniq) || /core-logger/.test(source)",y.Core),zline:T("/^0$/.test(line)",y.Global,!1),devtools:T('/^"/.test(source) || /eval code/.test(source)',y.Global,!1),host:T("/^\\/.+\\.js($|\\?)/.test(source) || /"+C+"/.test(source)",y.Self),apperror:T("/^AppError:/.test(message)",y.Self),ph:T("/imgsmail\\.ru\\/ph\\//.test(source)",y.Shared),pm:T("/imgsmail\\.ru\\/pm\\//.test(source)",y.Shared),"auth-gate":T("/authGate\\.js/.test(source)",y.Shared),"react-env":T("/react-env\\.bundle/.test(source)",y.Shared),"react-async":T("/react-async\\.min/.test(source)",y.Shared),promokit:T("/\\/pkgs\\/promokit\\//.test(source)",y.Shared),ajs:T("/js\\/ajs\\.min/.test(source)",y.Shared),raven:T("/\\/raven\\.min/.test(source) && /imgsmail\\.ru/.test(source)",y.Shared,!1),"2kit":T("/pkgs\\/2kit\\//.test(source)",y.Shared),"2promo":T("/pkgs\\/2promo/.test(source)",y.Shared),ductus:T("/pkgs\\/ductus/.test(source)",y.Shared),themes:T("/imgsmail\\.ru\\/themes//.test(source)",y.Shared),"informers-abp":T("/imgsmail\\.ru\\/informers\\/abp/.test(source)",y.Shared),informers:T("/imgsmail\\.ru\\/informers\\//.test(source)",y.Shared),require:T("/js\\/require\\./.test(source)",y.Shared,!1),"mr-o2":T("/(oauth2?|o2)\\.mail\\.ru/.test(source)",y.Shared,!1),assets:T("/\\/assets\\//.test(source)",y.Global,!1),"todo-main":T("/todo\\.mail\\.ru/.test(source) && /\\/main\\./.test(source)",y.Shared,!1),"todo-chunk":T("/todo\\.mail\\.ru/.test(source) && /\\.chunk\\./.test(source)",y.Shared,!1),"todo-other":T("/todo\\.mail\\.ru/.test(source)",y.Shared,!1),"pulse-lenta":T("/pulse\\.mail\\.ru/.test(source) && /-lenta-/.test(source)",y.Shared,!1),pulse:T("/pulse\\.mail\\.ru/.test(source)",y.Shared,!1),inj:T("/\\/inj_js\\//.test(source)",y.Ext,!1),exts:T("/(^(chrome|file|resource):)|(miscellaneous|extension)_bindings/.test(source)",y.Ext,!1),"local-exts":T("/^\\/home\\//.test(source)",y.Ext,!1),"ns-error":T("/^NS_ERROR_FAILURE: $/.test(message)",y.Ext,!1),ok:T("/\\/(odnoklassniki|ok)\\.ru\\//.test(source)",y.ThirdParty,!1),vk:T("/\\/(vk\\.com|vkontakte\\.ru)\\//.test(source)",y.ThirdParty,!1),top:T("/top-\\w+\\.mail\\.ru/.test(source)",y.ThirdParty,!1),consensu:T("/consensu\\.org/.test(source)",y.ThirdParty,!1),kaspersky:T("/[A-Z0-9]{8}(-[A-Z0-9]{4}){3}-[A-Z0-9]{12}/.test(source)",y.ThirdParty,!1),trap:T("/adriver.ru|bos.icq.net|dailymotion.com|doubleclick.net|doubleverify.com|dvtps.com|gemius.pl|google.com|googleadservices.com|googlesyndication.com|googletagservices.com|gstatic.com|ivi.ru|live.com|moatads.com|mradx.net|[^@]rambler.ru|rutube.ru|scorecardresearch.com|serving-sys.com|smotri.com|videomore.ru|vimeo.com|weborama.fr|yandex.net|[^@]yandex.ru|yandex.st|yandexadexchange.net|yastatic.net|youtu.be|youtube.com|youtube.ru|ad.mail.ru/.test(source)",y.ThirdParty,!1),imgsmail:T("/imgsmail\\.ru/.test(source)",y.Global),submail:T("/^(https:)?\\/\\/([a-z0-9.-]+\\.)?mail.ru\\//.test(source)",y.Global)},N=["apperror","mail-core","zerline","devtools","host","ph","pm","auth-gate","react-env","react-async","ajs","raven","2kit","2promo","informers-abp","informers","require"];function T(e,r,t){return{test:e,tag:r,log:!1!==t}}var U=[];var A={category:"unknown",tag:y.Unknown,test:!0,log:!0};function M(e){for(var r=e[0],t=e[1],o=e[2],n=e[3],a=e[4],s={url:e[5]||"",name:a&&a.name||"unk",message:(r||"").toString()||a&&a.message||"<<unknown>>",source:t||"",line:o||0,col:n||0,uniq:a&&a.uniq,stack:a&&a.stack||"",detail:a&&a.detail},i=a&&a.rule||_(s)||A,u=U.length;u--;)d("MCL:notify:"+u,U[u],s,i)}var $,I,X=(function(e,r){Object.defineProperty(r,"__esModule",{value:!0});var t="object"==typeof window&&window||{},o=null,n=[];function a(){if(null===o)try{o=t.xray&&t.xray.send?t.xray:t.require("@mail/xray")}catch(e){try{o=t.require("mrg-xray")}catch(e){}}return o||null}function s(e){null===o?n.push(e):e(o)}r.getGlobalXRaySync=a,r.getGlobalXRay=s,r.createXRayQueue=function(e){var r=[];return s((function(t){t=e?e(t,r):t,r.push=function(e){t.send.apply(t,e)},r.forEach(r.push),r.length=0})),{send:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.push(e)}}},function e(){null===a()?setTimeout(e,100):(n.forEach(s),n.length=0)}()}($={exports:{}},$.exports),$.exports);(I=X)&&I.__esModule&&Object.prototype.hasOwnProperty.call(I,"default")&&I.default;X.getGlobalXRaySync,X.getGlobalXRay;var z=X.createXRayQueue;var J={reporters:U,rules:{set:O,priority:R,basePriority:q,update:P,match:_}},B=/\.test\./;return e.dispatchError=p,e.dispatchReactError=function(e,r){p(e,{sender:"react",info:r})},e.errors=J,e.init=function(e){void 0===e&&(e={});var r,t,o,n,a,i=e.errors||{},l=i.rules;if(l){for(var p in l)if(l.hasOwnProperty(p)){var v=l[p];(v="string"==typeof v?{test:v}:v).log=null==v.log?!1!==i.logByDefault:v.log,v.tag=v.tag||y.Self,P(p,v)}R(i.priority||Object.keys(l))}O(L),q(N),r=window,t=null==i.silent?!B.test(location.host):!1!==i.silent,d((function(){c=r.onerror,u=!!t,r.onerror=g,r.addEventListener("unhandledrejection",h),r.addEventListener("error",(function(e){m&&(e.stopImmediatePropagation(),m=!1)})),Object.defineProperty(r,"onerror",{configurable:!1,enumerable:!0,get:function(){return c},set:function(e){c=e}})})),P("host",{log:!1!==i.logByDefault}),U.push.apply(U,[(o=e.xray,n="{project}",a=o||z((function(e,r){var t,o=e.getConfig(),a=o.radarPrefix;return n=((null===(t=o.defaultParams)||void 0===t?void 0:t.p)||"unknown")+(a?"_"+a:""),r.forEach((function(e){e[1]&&e[1].rlog&&e[1].rlog_message&&(e[1].rlog=e[1].rlog.replace("{project}",n),e[1].rlog_message.project=n)})),e})),function(e,r){var t=r.log,o=r.tag,s=r.category,i={},u={i:i};t&&(u.rlog=!0===t?"pk-err-"+(o===y.API?n+"-api":o===y.Self?n+"-self":s):t,u.rlog_message={v:"1.0.0-rc.16",err:e,tag:o,category:s,project:n}),r.silent||(i["t-"+o+"-c-"+s+"-n-"+e.name.replace(/(.)Error/,"$1").toLowerCase()]=1),a.send("pk-err",u)})].concat(e.reporters||[])),function(e){e.forEach(M),e.length=0,e.push=M}(s),!1!==e.checkJSON&&(f=!0,JSON.parse("~"))},e.name="@mail-core/logger",e.tryCatch=d,e.version="1.0.0-rc.16",e}({});
